Space parameters
================


Figure out flexible parameterisation for spaces

```
2026-01-18		new task	ðŸŒŒðŸ“Šâ„¹
2026-01-23		0.1a		pre-release
```


Moved some more stuff to html-common that will *hopefully* end up good enough to serve the other projects.
For now worm-farm is the only project using the html-common version of PlanarSpace, so will try out a few things, and try to keep it in step with Turtle until it's ready to switch over to the shared version.

One thing I need here that has been languishing in Turtle is space size parameters.
I'll try to use 'size' rather than dimensions for these kinds of uses as dimensions more properly refer to things like X, Y and Z - 1D, 2D, 3D etc.

In turtle so far size parameters have been 'soft' - extents aren't really limited, it just determines how the grid gets drawn.
For wormfarm I need to be able to tie this down in various ways; not going put the hard movement limits in yet, just want to figure out how to specify them.

There are actually quite a few potential space parameters I've pondered, but here are main ones for now:
* x extent				- x min, x max
* y extent				- y min, y max
* polar axis			- vertical up / right horizontal
* polar directiom		- clockwise / ccw
* resolution/precision	- decimal places, significant figures (very much needs attention)

So how to specify these for new space instances?
My first thought is that each space module defines it's own parameter structure type, so that the space constructor looks like `new FooSpace('myFooSpace', parameters)` everywhere.
If that typechecks okay...



Pre-release - 0.1a
------------------

I'm doing more other stuff in here than sorting out space parameters right now, so I'm going to to a pre-release just to get the other stuff back into main.

Still faffing around with other stuff, will probably just call this here as 0.1 and continue on with the branch.



Angle Issues
------------

PlanarSpace angles incorrect?
(was going to be a new task/branch, but the problem is in this branch)


Just spotted this while thinking about space mapping:
```

	let s = new PlanarSpace.Space('example-space',{});
	let p = s.newPoint('p');
	p.setCartesian(15,20);

	p.x				// 15
	p.y				// 20
	p.angle			// Object { #degrees: -126.86989764584402 }
	p.radius		// 25
```

That angle should come back as +36.86989...
Prob not a big issue, just want to check it out and normalise it for everyone involved.
I'm not using html-common in turtle yet, so might want to bite the bullet and change it over around about here as well.
Should also wrap up the 0.1 release.


### Have a look

I've just cut a branch off main for the task and there it looks right:

```
p.angle Object { #degrees: 36.86989764584399 }
```
So I've done something in this branch that needs fixing.
*Sigh* oh for a test suite....

Looks like I'd started frigging around with the space settings in this branch and hadn't really completed/tested it yet.
So back to that then.


Testing
-------

I'm having a go at a little testing/assertion library to make some of this a little smoother.
One thing that's immediately annoying though are the constructors I've used for Point and Position.

For the testing I want to do something like this:
```
	test.testArray(
		predicate.allEqual,
		[
			[(new Point( 100, 100)).degrees, 45],
			[(new Point( 100,-100)).degrees, 135],
			[(new Point(-100, 100)).degrees, -45],
			[(new Point(-100,-100)).degrees, -135],
		]
	);
```
That will let me know if the space config and maths are working correctly.
But the constructor/setter arrangement I have won't let me do that right now, so they'll need to change.
The constructors should allow for (optionally) one set of initial coordinates, in the space's "base" coordinate system.

I'm going to end up breaking some other things too, like pushing entity names to the back of the list I think.
Need to decide on all this.


